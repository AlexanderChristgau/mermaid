

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Image sampling &mdash; mermaid 0.1 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="mermaid 0.1 documentation" href="index.html"/>
        <link rel="next" title="Model factory" href="model_factory.html"/>
        <link rel="prev" title="Forward models" href="forward_models.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> mermaid
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Notes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="notes/howto_own_registration.html">How to write your own registration model</a></li>
<li class="toctree-l1"><a class="reference internal" href="notes/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="notes/parameters.html">Parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="notes/simple_example.html">Simple example</a></li>
<li class="toctree-l1"><a class="reference internal" href="notes/todos.html">TODOs</a></li>
</ul>
<p class="caption"><span class="caption-text">Package Reference</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="custom_optimizers.html">Custom optimizers</a></li>
<li class="toctree-l1"><a class="reference internal" href="custom_pytorch_extensions.html">Custom pyTorch extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_generation.html">Example generation</a></li>
<li class="toctree-l1"><a class="reference internal" href="finite_differences.html">Finite differences</a></li>
<li class="toctree-l1"><a class="reference internal" href="forward_models.html">Forward models</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Image sampling</a></li>
<li class="toctree-l1"><a class="reference internal" href="model_factory.html">Model factory</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_parameters.html">Parameter module</a></li>
<li class="toctree-l1"><a class="reference internal" href="multiscale_optimizer.html">Multiscale optimizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="registration_networks.html">Registration networks</a></li>
<li class="toctree-l1"><a class="reference internal" href="regularizer_factory.html">Regularizer factory</a></li>
<li class="toctree-l1"><a class="reference internal" href="rungekutta_integrators.html">Runge-Kutta integrators</a></li>
<li class="toctree-l1"><a class="reference internal" href="similarity_measure_factory.html">Similarity measure factory</a></li>
<li class="toctree-l1"><a class="reference internal" href="smoother_factory.html">Smoother factory</a></li>
<li class="toctree-l1"><a class="reference internal" href="stn.html">Spatial transforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="utils.html">Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="viewers.html">Viewers</a></li>
<li class="toctree-l1"><a class="reference internal" href="visualize_registration_results.html">Visualize registration results</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">mermaid</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Image sampling</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/image_sampling.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="image-sampling">
<h1>Image sampling<a class="headerlink" href="#image-sampling" title="Permalink to this headline">¶</a></h1>
<img src="_images/inheritance-b19f717d90a50182c3dc743493698db2e9a433ea.png" alt="Inheritance diagram of image_sampling" usemap="#inheritance086242b28d" class="inheritance"/>
<map id="inheritance086242b28d" name="inheritance086242b28d">
<area shape="rect" id="node1" href="#image_sampling.ResampleImage" target="_top" title="This class supports image resampling, both based on a scale factor (implemented via skimage&#39;s zoom" alt="" coords="5,5,225,29"/>
</map>
<span class="target" id="module-image_sampling"></span><p>Package to allow for resampling of images, for example to support multi-scale solvers.</p>
<div class="admonition-todo admonition" id="index-0">
<p class="first admonition-title">Todo</p>
<p class="last">skimage in version 0.14 (not officially released yet, supports 3D up- and downsampling.
Should replace this class with the skimage functionality once officially available.</p>
</div>
<dl class="class">
<dt id="image_sampling.ResampleImage">
<em class="property">class </em><code class="descclassname">image_sampling.</code><code class="descname">ResampleImage</code><a class="reference internal" href="_modules/image_sampling.html#ResampleImage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#image_sampling.ResampleImage" title="Permalink to this definition">¶</a></dt>
<dd><p>This class supports image resampling, both based on a scale factor (implemented via skimage’s zoom
functionality) and to a fixed size (via custom interpolation). For multi-scaling the fixed size
option is preferred as it gives better control over the resulting image sizes. In particular using
the scaling factors consistent image sizes cannot be guaranteed when down-/up-sampling multiple times.</p>
<dl class="method">
<dt id="image_sampling.ResampleImage.set_iter">
<code class="descname">set_iter</code><span class="sig-paren">(</span><em>nrIter</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/image_sampling.html#ResampleImage.set_iter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#image_sampling.ResampleImage.set_iter" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the number of smoothing iterations done after upsampling and before downsampling.
The default is 0, i.e., no smoothing at all.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>nrIter</strong> – number of iterations</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">no return arguments</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="image_sampling.ResampleImage.get_iter">
<code class="descname">get_iter</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/image_sampling.html#ResampleImage.get_iter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#image_sampling.ResampleImage.get_iter" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the number of iterations</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">number of smoothing iterations after upsampling and before downsampling</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="image_sampling.ResampleImage.upsample_image_to_size">
<code class="descname">upsample_image_to_size</code><span class="sig-paren">(</span><em>I</em>, <em>spacing</em>, <em>desiredSize</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/image_sampling.html#ResampleImage.upsample_image_to_size"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#image_sampling.ResampleImage.upsample_image_to_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Upsamples an image to a given desired size</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>I</strong> – Input image (expected to be of BxCxXxYxZ format)</li>
<li><strong>spacing</strong> – array describing the spatial spacing</li>
<li><strong>desiredSize</strong> – array for the desired size (excluding B and C, i.e, 1 entry for 1D, 2 for 2D, and 3 for 3D)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">returns a tuple: the upsampled image, the new spacing after upsampling</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="image_sampling.ResampleImage.downsample_image_to_size">
<code class="descname">downsample_image_to_size</code><span class="sig-paren">(</span><em>I</em>, <em>spacing</em>, <em>desiredSize</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/image_sampling.html#ResampleImage.downsample_image_to_size"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#image_sampling.ResampleImage.downsample_image_to_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Downsamples an image to a given desired size</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>I</strong> – Input image (expected to be of BxCxXxYxZ format)</li>
<li><strong>spacing</strong> – array describing the spatial spacing</li>
<li><strong>desiredSize</strong> – array for the desired size (excluding B and C, i.e, 1 entry for 1D, 2 for 2D, and 3 for 3D)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">returns a tuple: the downsampled image, the new spacing after downsampling</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="image_sampling.ResampleImage.upsample_image_by_factor">
<code class="descname">upsample_image_by_factor</code><span class="sig-paren">(</span><em>I</em>, <em>spacing</em>, <em>scalingFactor=0.5</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/image_sampling.html#ResampleImage.upsample_image_by_factor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#image_sampling.ResampleImage.upsample_image_by_factor" title="Permalink to this definition">¶</a></dt>
<dd><p>Upsamples an image based on a given scale factor</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>I</strong> – Input image (expected to be of BxCxXxYxZ format)</li>
<li><strong>spacing</strong> – array describing the spatial spacing</li>
<li><strong>scalingFactor</strong> – scaling factor, e.g., 2 scales all dimensions by two</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">returns a tuple: the upsampled image, the new spacing after upsampling</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="image_sampling.ResampleImage.downsample_image_by_factor">
<code class="descname">downsample_image_by_factor</code><span class="sig-paren">(</span><em>I</em>, <em>spacing</em>, <em>scalingFactor=0.5</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/image_sampling.html#ResampleImage.downsample_image_by_factor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#image_sampling.ResampleImage.downsample_image_by_factor" title="Permalink to this definition">¶</a></dt>
<dd><p>Downsamples an image based on a given scale factor</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>I</strong> – Input image (expected to be of BxCxXxYxZ format)</li>
<li><strong>spacing</strong> – array describing the spatial spacing</li>
<li><strong>scalingFactor</strong> – scaling factor, e.g., 0.5 scales all dimensions by half</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">returns a tuple: the downsampled image, the new spacing after downsampling</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="image_sampling.ResampleImage.upsample_vector_field_by_factor">
<code class="descname">upsample_vector_field_by_factor</code><span class="sig-paren">(</span><em>v</em>, <em>spacing</em>, <em>scalingFactor=0.5</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/image_sampling.html#ResampleImage.upsample_vector_field_by_factor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#image_sampling.ResampleImage.upsample_vector_field_by_factor" title="Permalink to this definition">¶</a></dt>
<dd><p>Upsamples a vector field based on a given scale factor</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>v</strong> – Input vector field (expected to be of BxCxXxYxZ format)</li>
<li><strong>spacing</strong> – array describing the spatial spacing</li>
<li><strong>scalingFactor</strong> – scaling factor, e.g., 2 scales all dimensions by two</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">returns a tuple: the upsampled vector field, the new spacing after upsampling</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="image_sampling.ResampleImage.downsample_vector_field_by_factor">
<code class="descname">downsample_vector_field_by_factor</code><span class="sig-paren">(</span><em>v</em>, <em>spacing</em>, <em>scalingFactor=0.5</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/image_sampling.html#ResampleImage.downsample_vector_field_by_factor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#image_sampling.ResampleImage.downsample_vector_field_by_factor" title="Permalink to this definition">¶</a></dt>
<dd><p>Downsamples a vector field based on a given scale factor</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>v</strong> – Input vector field (expected to be of BxCxXxYxZ format)</li>
<li><strong>spacing</strong> – array describing the spatial spacing</li>
<li><strong>scalingFactor</strong> – scaling factor, e.g., 0.5 scales all dimensions by half</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">returns a tuple: the downsampled vector field, the new spacing after downsampling</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="image_sampling.test_me">
<code class="descclassname">image_sampling.</code><code class="descname">test_me</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/image_sampling.html#test_me"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#image_sampling.test_me" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience testing function (to be converted to a test)</p>
</dd></dl>

<dl class="function">
<dt id="image_sampling.test_me_2">
<code class="descclassname">image_sampling.</code><code class="descname">test_me_2</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/image_sampling.html#test_me_2"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#image_sampling.test_me_2" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience testing function (to be converted to a test)</p>
</dd></dl>

</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="model_factory.html" class="btn btn-neutral float-right" title="Model factory" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="forward_models.html" class="btn btn-neutral" title="Forward models" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Marc Niethammer.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.1',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>